(()=>{const{registerBlockType:e}=wp.blocks,{element:{useState:t,useEffect:l}}=wp;e("employee-manager/employee-list",{title:"Employee List",icon:"shield",category:"common",attributes:{sortOrder:{type:"string",default:"asc"},sortField:{type:"string",default:"name"}},edit:e=>{const{attributes:a,setAttributes:r}=e,{sortOrder:c,sortField:n}=a,[d,o]=t([]),[s,m]=t([]);l((()=>{fetch(`${wpApiSettings.root}wp/v2/employee`).then((e=>e.json())).then((e=>o(e))).catch((e=>console.error(e)))}),[]),l((()=>{(()=>{const e=[...d];e.sort(((e,t)=>"asc"===c?e.meta[`_em_${n}`].localeCompare(t.meta[`_em_${n}`]):t.meta[`_em_${n}`].localeCompare(e.meta[`_em_${n}`]))),m(e)})()}),[d,c,n]);const i=e=>{r({sortField:e})};return React.createElement("div",null,React.createElement("h2",null,"Employee List"),React.createElement("button",{onClick:()=>{r({sortOrder:"asc"===c?"desc":"asc"})}},"Toggle Sort Order (","asc"===c?"Ascending":"Descending",")"),React.createElement("table",{style:{borderCollapse:"collapse",width:"100%"}},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{style:{border:"2px solid #ddd"},onClick:()=>i("name")},"Name ","name"===n&&React.createElement("span",null,"(","asc"===c?"↑":"↓",")")),React.createElement("th",{style:{border:"2px solid #ddd"},onClick:()=>i("email")},"Email ","email"===n&&React.createElement("span",null,"(","asc"===c?"↑":"↓",")")),React.createElement("th",{style:{border:"2px solid #ddd"},onClick:()=>i("age")},"Age ","age"===n&&React.createElement("span",null,"(","asc"===c?"↑":"↓",")")),React.createElement("th",{style:{border:"2px solid #ddd"},onClick:()=>i("date_of_hiring")},"Date of Hiring ","date_of_hiring"===n&&React.createElement("span",null,"(","asc"===c?"↑":"↓",")")))),React.createElement("tbody",null,s.map((e=>React.createElement("tr",{key:e.id},React.createElement("td",{style:{border:"1px solid #ddd",textAlign:"center"}},e.meta._em_name),React.createElement("td",{style:{border:"1px solid #ddd",textAlign:"center"}},e.meta._em_email),React.createElement("td",{style:{border:"1px solid #ddd",textAlign:"center"}},e.meta._em_age),React.createElement("td",{style:{border:"1px solid #ddd",textAlign:"center"}},e.meta._em_date_of_hiring)))))))},save:()=>null})})();